// ********RoostGPT********
/*
Test generated by RoostGPT for test test-workflow using AI Type Azure Open AI and AI Model roostgpt-4-32k
ROOST_METHOD_HASH=addResourceHandlers_48286cc0db
ROOST_METHOD_SIG_HASH=addResourceHandlers_289a4a6d21
"""
  Scenario 1: Testing the addition of a resource handler

  Details:
    TestName: testAddingResourceHandler
    Description: This test checks whether the addResourceHandler method takes in the appropriate parameters and registers them accordingly.
  Execution:
    Arrange: Mock the instances of ResourceHandlerRegistry and KnoteProperties.
    Act: Invoke the addResourceHandlers method with the mocked parameters.
    Assert: Verify that the addResourceHandler method was called on the ResourceHandlerRegistry mock with the right parameters.
  Validation:
    This ensures that the ResourceHandlerRegistry correctly adds the resource handler provided. It validates that the method appears to be working correctly based on the given parameters, making it important in ensuring correct URL mapping.
  Scenario 2: Checking the functionality of addResourceLocations method

  Details:
    TestName: testAddingResourceLocations
    Description: This test aims to check if the addResourceLocations method points to the correct path location.
  Execution:
    Arrange: Mock the instances of ResourceHandlerRegistry and KnoteProperties. Set up specific return value for getUploadDir.
    Act: Invoke the addResourceHandlers method with the mocked parameters.
    Assert: Assert that the addResourceLocations was called with "file:" + properties.getUploadDir().
  Validation:
    This test is necessary to ensure that resources are being placed in the correct directory. Following the correct path guarantees that resources will be fetched accurately.
  Scenario 3: Verify the functionality of setCachePeriod

  Details:
    TestName: testSettingCachePeriod
    Description: This test verifies if the setCachePeriod method sets cache period to 3600 seconds as intended.
  Execution:
    Arrange: Mock the instances of ResourceHandlerRegistry and KnoteProperties.
    Act: Invoke the addResourceHandlers method with the mocked parameters.
    Assert: Assert that setCachePeriod() was called with argument 3600.
  Validation:
    Ensuring that cache period is set correctly helps in efficient loading of resources.
  Scenario 4: Validate the addition of resource resolver

  Details:
    TestName: testAdditionOfResourceResolver
    Description: This test validates if the new PathResourceResolver object is being added successfully.
  Execution:
    Arrange: Mock the instances of ResourceHandlerRegistry and KnoteProperties.
    Act: Invoke the method addResourceHandlers with the mocked parameters.
    Assert: Verify that the addResolver method was called with a new instance of PathResourceResolver.
  Validation:
    It is critical to validate that a new resource resolver is added correctly as it is responsible for locating resources by URL path safely.
  Scenario 5: Verify resourceChain method is called with true argument

  Details:
    TestName: testResourceChainArgument
    Description: This test validates that the resourceChain method is invoked with true argument.
  Execution:
    Arrange: Mock the instances of ResourceHandlerRegistry and KnoteProperties.
    Act: Call the addResourceHandlers method with the mocked parameters.
    Assert: Verify that the resourceChain method was called with argument true.
  Validation:
    Checking that the resourceChain method is invoked with true argument is necessary as it ensures that caching and other features work properly in the application.
"""
*/
// ********RoostGPT********
package com.learnk8s.knote.UploadConfig;

import org.commonmark.*;
import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.extension.ExtendWith;
import org.mockito.Mock;
import org.mockito.junit.jupiter.MockitoExtension;
import org.springframework.web.servlet.config.annotation.ResourceHandlerRegistration;
import org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry;
import org.springframework.web.servlet.resource.PathResourceResolver;
import static org.mockito.Mockito.*;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.context.properties.EnableConfigurationProperties;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;
import org.junit.jupiter.api.*;

@Tag("com.learnk8s.knote.UploadConfig")
@Tag("com.learnk8s.knote.UploadConfig.addResourceHandlers")
@Tag("com.learnk8s.knote.UploadConfig.getUploadDir")
@Tag("roostTest1")
@Tag("roostTest2")
@ExtendWith(MockitoExtension.class)
public class KnoteConfigAddResourceHandlersTest {

	@Mock
	private ResourceHandlerRegistry registry;

	@Mock
	private KnoteProperties properties;

	@Mock
	private KnoteConfig knoteConfig;

	@Test
	public void testAddingResourceHandler() {
		ResourceHandlerRegistration mockHandler = mock(ResourceHandlerRegistration.class);
		when(registry.addResourceHandler("/uploads/**")).thenReturn(mockHandler);

		knoteConfig.addResourceHandlers(registry);

		verify(registry).addResourceHandler("/uploads/**");
	}

	@Test
    public void testAddingResourceLocations() {
        when(properties.getUploadDir()).thenReturn("testUploadDir");
        ResourceHandlerRegistration mockHandler = mock(ResourceHandlerRegistration.class);
        when(registry.addResourceHandler(anyString())).thenReturn(mockHandler);
        when(mockHandler.addResourceLocations(anyString())).thenReturn(mockHandler);

        knoteConfig.addResourceHandlers(registry);

        verify(mockHandler).addResourceLocations("file:testUploadDir");
    }

	@Test
	public void testSettingCachePeriod() {
		ResourceHandlerRegistration mockHandler = mock(ResourceHandlerRegistration.class);
		when(registry.addResourceHandler(anyString())).thenReturn(mockHandler);
		when(mockHandler.setCachePeriod(anyInt())).thenReturn(mockHandler);

		knoteConfig.addResourceHandlers(registry);

		verify(mockHandler).setCachePeriod(3600);
	}

	@Test
	public void testResourceChainArgument() {
		ResourceHandlerRegistration mockHandler = mock(ResourceHandlerRegistration.class);
		when(registry.addResourceHandler(anyString())).thenReturn(mockHandler);
	// 	when(mockHandler.resourceChain(anyBoolean())).thenReturn(mockHandler);

		knoteConfig.addResourceHandlers(registry);

		verify(mockHandler).resourceChain(true);
	}

}